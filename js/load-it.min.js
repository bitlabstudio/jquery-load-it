function LoadItPlugin(a){this.$element=$(a);this.element=a;this.DEFAULT_PREFIX="data-loadit-";this.EXCLUDED_ATTRIBUTES=["url","loading-class","content"]}LoadItPlugin.prototype.init=function(){var b,a;a=this._get_url();b=this._get_loading_class();this.$element.addClass(b);this.load_data(a,b,false)};LoadItPlugin.prototype.load_more=function(){var b,a;a=this._get_url();b=this._get_loading_class();this.$element.addClass(b);this.load_data(a,b,true)};LoadItPlugin.prototype.load_data=function(c,e,b){var d=this._get_query_string(b);var a=this._get_content_placement();$.ajax({url:c+d,context:this.element,success:function(h){var g=$(this).find(".loadit-header"),f=$(this).find(".loadit-footer");if(!$(this).children().length){$(this).html(h)}else{if(a==="replace"||!$(this).children().length){$(this).html("");if(g.length){$(this).append(g)}$(this).append($(h));if(f.length){$(this).append(f)}}else{if(a==="append"){if(f.length){$(h).insertBefore(f)}else{$(h).insertAfter($(this).children().last())}}else{if(a==="prepend"){if(g.length){$(h).insertAfter(g)}else{$(h).insertBefore($(this).children().not("loadit-header").first())}}}}}$(this).removeClass(e)}})};LoadItPlugin.prototype._get_content_placement=function(){var a=this.$element.attr("data-loadit-content");if(!a){a="replace"}return a};LoadItPlugin.prototype._get_loading_class=function(){var a=this.$element.attr("data-loadit-loading-class");if(!a){a="loadit-loading"}return a};LoadItPlugin.prototype._get_query_string=function(f){var b,c={},k,h="",g,j,d=this.$element.find(".loadit-footer"),e;for(e=0;e<this.element.attributes.length;e++){b=this.element.attributes[e];c[b.name]=b.value}if(f){for(e=0;e<d[0].attributes.length;e++){b=d[0].attributes[e];c[b.name]=b.value}}for(var a in c){if(a.indexOf(this.DEFAULT_PREFIX)===0){if(h===""){g="?"}else{g="&"}k=a.slice(this.DEFAULT_PREFIX.length);if(this.EXCLUDED_ATTRIBUTES.indexOf(k)===-1){j=encodeURIComponent(c[a]);h=h+g+k+"="+j}}}return h};LoadItPlugin.prototype._get_url=function(){var a=this.$element.attr("data-loadit-url");if(!a){a="."}return a};(function(a){a.fn.loadit=function(b){return this.each(function(){var c=new LoadItPlugin(this);if(b==="more"){a.data(this,"load_more",c.load_more())}else{a.data(this,"loadit",c.init())}})};a(document).ready(function(){a('[data-class="loadit"]').loadit()});a(document).on("click",'[data-class="loadit-morebutton"]',function(b){b.preventDefault();a(this).parents('[data-class="loadit"]').loadit("more")})}(jQuery));